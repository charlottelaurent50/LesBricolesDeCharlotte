$(function(){function t(){var t=s.length;if(t){var e,a,n=s.eq(h);if(s.removeClass(u),r.text(h+1+"/"+(t>99?"99+":t)).fadeIn(),!n.length)return;n.addClass(u),e=n.offset().top-l,0===h?$("body, html").animate({scrollTop:e},500):(a=n.offset().top-s.eq(p).offset().top,Math.abs(a)>$(window).height()/2&&window.scrollTo(0,e))}else r.text("0/0").addClass("trx-hidden-status")}var e=$("input[type='search']"),a=$("button[data-search='clear']"),n=$("button[data-search='prev']"),o=$("button[data-search='next']"),i=$(".trx-search-loader"),r=$(".trx-search-status"),c=$(".doc-content"),s=[],u="current",l=$("#header").height(),h=0,p=0;$(".nav-list li a").each(function(t,e){TRX_HOTSPOTS_DATA.autocompliteTags.push($(e).text())}),$("#trx-search-input").autocomplete({appendTo:".trx-search",position:{my:"left top+2",of:".trx-search"},open:function(t,a){var n=e.val(),o=new RegExp(n,"ig"),i="<span class='ui-autocomplete-term'>%s</span>".replace("%s",n);$(this).autocomplete("widget").css({width:"290px"}),$(".ui-autocomplete .ui-menu-item div",".trx-search").each(function(){var t=$(this);t.html(t.text().replace(o,i))})},minLength:3,delay:0,source:function(t,e){var a=$.trim(t.term),n=new RegExp($.ui.autocomplete.escapeRegex(a),"i");""!==a&&e($.grep(TRX_HOTSPOTS_DATA.autocompliteTags,function(t){return t.match(n)}))},select:function(t,a){return e.val(a.item.value).trigger("input"),!1}}),e.on("input",function(){var e,a=this.value;r.fadeOut(),i.fadeIn(),c.unmark({done:function(){c.mark(a,{separateWordSearch:!1,done:function(){s=c.find("mark"),e=s.length,i.fadeOut(),h=0,r.removeClass("trx-hidden-status").text("1/"+(e>99?"99+":e)).fadeIn(),t()}})}})}).on("keypress",function(t){t.shiftKey&&13==t.which?n.trigger("click"):13==t.which&&o.trigger("click")}),a.on("click",function(){c.unmark(),e.val("").focus()}),o.add(n).on("click",function(){s.length&&(p=h,(h+=$(this).is(n)?-1:1)<0&&(h=s.length-1),h>s.length-1&&(h=0),t())})});